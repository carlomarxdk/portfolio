<!DOCTYPE html>
<html {{ with .Site.LanguageCode }}lang="{{ . }}" {{ end }} class="scroll-smooth focus:scroll-auto">
<head>
{{ partial "head.html" . }}
</head>

<body class="bg-stone-50 scroll-smooth focus:scroll-auto">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 focus:z-50 focus:px-4 focus:py-2 focus:bg-indigo-600 focus:text-white">Skip to main content</a>
    {{ partial "nav.html" . }}
    <main id="main-content" class="max-w-screen-xl px-4 py-8 mx-auto">
        <article itemscope itemtype="https://schema.org/BlogPosting">
            <header class="mx-auto text-center mb-12 max-w-4xl">
                <p class="blog-label">Blogpost</p>
                <h1 class="main-title" itemprop="headline">{{.Title}}</h1>
                    {{ with .Params.subtitle }}
    <p class="subtitle-title">
        {{ . }}
    </p>
        {{ end }}

    <p class="text-sm text-gray-600 mt-8">

        <time datetime="{{ .Date.Format "2006-01-02" }}" itemprop="datePublished">
            {{ .Date.Format "Jan 2, 2006" }}
        </time>
        <meta itemprop="dateModified" content="{{ .Lastmod.Format "2006-01-02" }}">
        {{ if ne (.Date.Format "2006-01-02") (.Lastmod.Format "2006-01-02") }}
            路 Updated <time datetime="{{ .Lastmod.Format "2006-01-02" }}">{{ .Lastmod.Format "Jan 2, 2006" }}</time>
        {{ end }}

        路 {{ if lt 1 .WordCount }}{{ .WordCount }} words{{ else }}{{ .WordCount }} word{{ end }}
        路 {{ .ReadingTime }} minute read
        {{ with .Params.author }}
            路 By
            <strong>
                {{ if reflect.IsSlice . }}
                {{ delimit . ", " }}
                {{ else }}
                {{ . }}
                {{ end }}
            </strong>
            {{ end }}
    </p>
            </header>
            
            <div class="max-w-screen-lg mx-auto">
                {{/* Build TOC manually from page fragments */}}
                {{ $headings := slice }}
                {{ with .Fragments }}
                    {{ with .Headings }}
                        {{ range . }}
                            {{ if and (ge .Level 2) (le .Level 4) }}
                                {{ $headings = $headings | append . }}
                            {{ end }}
                        {{ end }}
                    {{ end }}
                {{ end }}
                {{ $hasToc := and .Site.Params.enableToc (gt (len $headings) 0) }}
                
                <div class="lg:grid lg:grid-cols-12 lg:gap-8">
                    {{ if $hasToc }}
                    <aside class="lg:col-span-3 mb-8 lg:mb-0">
                        <nav class="toc bg-white border border-gray-200 rounded-lg p-4 lg:sticky lg:top-20 shadow-sm" aria-label="Table of Contents">
                            <h2 class="text-base font-semibold text-gray-900 mb-3 font-funnel">Table of Contents</h2>
                            <ul class="text-sm space-y-2 list-none pl-0">
                                {{ range $headings }}
                                <li class="{{ if eq .Level 2 }}{{ else if eq .Level 3 }}pl-4{{ else }}pl-8{{ end }}">
                                    <a href="#{{ .ID }}" class="text-gray-700 hover:text-indigo-600 transition-colors no-underline hover:underline block py-1">
                                        {{ .Title }}
                                    </a>
                                </li>
                                {{ end }}
                            </ul>
                        </nav>
                    </aside>
                    <div class="lg:col-span-9">
                        <div class="prose prose-sm md:prose prose-blog prose-with-sidenotes" itemprop="articleBody"> 
                            {{ .Content }}
                        </div>
                    </div>
                    {{ else }}
                    <div class="lg:col-span-12">
                        <div class="prose prose-sm md:prose prose-blog prose-with-sidenotes mx-auto" itemprop="articleBody"> 
                            {{ .Content }}
                        </div>
                    </div>
                    {{ end }}
                </div>
            </div>
            
            
            {{ if .Site.Params.enableShare }}
            <div class="mt-12 pt-8 border-t border-gray-200 max-w-screen-lg mx-auto">
                {{ partial "share.html" . }}
            </div>
            {{ end }}
        </article>
    </main>
    {{ partial "footer.html" . }}

    {{ partial "js.html" . }}
</body>

</html>
